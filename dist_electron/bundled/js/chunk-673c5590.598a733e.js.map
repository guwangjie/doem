{"version":3,"sources":["webpack:///./src/api/permission/permission_role.js","webpack:///./src/views/permission/permission_role/permission_role_add.vue?dc3b","webpack:///src/views/permission/permission_role/permission_role_add.vue","webpack:///./src/views/permission/permission_role/permission_role_add.vue?b89a","webpack:///./src/views/permission/permission_role/permission_role_add.vue"],"names":["permissionMenuNodes","request","url","method","permissionSrcNodes","permissionRoleAdd","ruleForm","data","permissionRoleLst","params","permissionRoleDelete","permissionRoleDetail","permissionRoleEdit","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","ref","rules","model","value","callback","$$v","$set","expression","defaultProps","on","$event","submitForm","_v","resetForm","staticRenderFns","name","role_name","permissionMenuIds","permissionSrcIds","children","label","getPermissionMenuNodes","getPermissionSrcNodes","methods","formName","$refs","validate","valid","concat","tempMenuIds","tree","getCheckedKeys","tempSrcIds","treeSrc","resetFields","component"],"mappings":"kHAAA,8PAEO,SAASA,IACd,OAAOC,eAAQ,CACbC,IAAK,kCACLC,OAAQ,QAIL,SAASC,IACd,OAAOH,eAAQ,CACbC,IAAK,iCACLC,OAAQ,QAIL,SAASE,EAAkBC,GAChC,OAAOL,eAAQ,CACbC,IAAK,+BACLC,OAAQ,OACRI,KAAMD,IAIH,SAASE,EAAkBC,GAChC,OAAOR,eAAQ,CACbC,IAAK,gCACLC,OAAQ,MACRM,OAAQA,IAIL,SAASC,EAAqBD,GACnC,OAAOR,eAAQ,CACbC,IAAK,mCACLC,OAAQ,MACRM,OAAQA,IAIL,SAASE,EAAqBF,GACnC,OAAOR,eAAQ,CACbC,IAAK,mCACLC,OAAQ,MACRM,OAAQA,IAIL,SAASG,EAAmBN,GACjC,OAAOL,eAAQ,CACbC,IAAK,gCACLC,OAAQ,OACRI,KAAMD,M,2CCpDV,IAAIO,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,qCAAqC,CAACF,EAAG,SAAS,CAACG,MAAM,CAAC,KAAO,OAAO,QAAU,WAAW,CAACH,EAAG,SAAS,CAACG,MAAM,CAAC,GAAK,GAAG,GAAK,KAAK,CAACH,EAAG,UAAU,CAACI,IAAI,WAAWD,MAAM,CAAC,MAAQP,EAAIS,MAAM,MAAQT,EAAIR,SAAS,iBAAiB,QAAQ,cAAc,UAAU,CAACY,EAAG,eAAe,CAACG,MAAM,CAAC,MAAQ,OAAO,KAAO,cAAc,CAACH,EAAG,WAAW,CAACG,MAAM,CAAC,YAAc,QAAQG,MAAM,CAACC,MAAOX,EAAIR,SAAkB,UAAEoB,SAAS,SAAUC,GAAMb,EAAIc,KAAKd,EAAIR,SAAU,YAAaqB,IAAME,WAAW,yBAAyB,GAAGX,EAAG,eAAe,CAACG,MAAM,CAAC,MAAQ,OAAO,KAAO,sBAAsB,CAACH,EAAG,UAAU,CAACI,IAAI,OAAOD,MAAM,CAAC,MAAQP,EAAIgB,aAAa,KAAOhB,EAAId,oBAAoB,WAAW,KAAK,gBAAgB,OAAO,GAAGkB,EAAG,eAAe,CAACG,MAAM,CAAC,MAAQ,OAAO,KAAO,qBAAqB,CAACH,EAAG,UAAU,CAACI,IAAI,UAAUD,MAAM,CAAC,MAAQP,EAAIgB,aAAa,KAAOhB,EAAIV,mBAAmB,WAAW,KAAK,gBAAgB,OAAO,GAAGc,EAAG,eAAe,CAACA,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,WAAWU,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOlB,EAAImB,WAAW,eAAe,CAACnB,EAAIoB,GAAG,QAAQhB,EAAG,YAAY,CAACa,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOlB,EAAIqB,UAAU,eAAe,CAACrB,EAAIoB,GAAG,SAAS,IAAI,IAAI,IAAI,IAAI,IAClwCE,EAAkB,G,YCgDtB,GACEC,KAAM,oBACN,OACE,MAAO,CACL/B,SAAU,CACRgC,UAAW,GACXC,kBAAmB,GACnBC,iBAAkB,IAEpBV,aAAc,CACZW,SAAU,WACVC,MAAO,SAET1C,oBAAqB,GACrBI,mBAAoB,GACpBmB,MAAO,CACLe,UAAW,CACnB,CAAU,UAAV,EAAU,QAAV,UAAU,QAAV,QACA,CAAU,IAAV,EAAU,IAAV,EAAU,QAAV,gBAAU,QAAV,YAKE,UACEvB,KAAK4B,yBACL5B,KAAK6B,yBAEPC,QAAS,CACP,yBACE,OAAN,OAAM,GACN,SACQ,KAAR,6BAEA,eAEI,wBACE,OAAN,OAAM,GACN,SACQ,KAAR,4BAEA,eAEI,WAAWC,GACT,IAAN,OACM/B,KAAKgC,MAAMD,GAAUE,SAASC,IAC5B,IAAIA,EA0BF,OAAO,EAzBPlC,KAAKT,SAASiC,kBAAoB,GAAGW,OAC/C,iCACA,sCAEUnC,KAAKT,SAASkC,iBAAmB,GAAGU,OAC9C,oCACA,yCAEUnC,KAAKT,SAAS6C,YAAcpC,KAAKgC,MAAMK,KAAKC,iBAC5CtC,KAAKT,SAASgD,WAAavC,KAAKgC,MAAMQ,QAAQF,iBAC9C,OAAV,OAAU,CAAV,eACA,SACY,KAAZ,UACc,QAAd,OACc,KAAd,UACc,QAAd,WACgB,EAAhB,aACA,wDAKA,iBAOI,UAAUP,GACR/B,KAAKgC,MAAMD,GAAUU,iBC7Hoc,I,YCO3dC,EAAY,eACd,EACA5C,EACAuB,GACA,EACA,KACA,KACA,MAIa,aAAAqB,E","file":"js/chunk-673c5590.598a733e.js","sourcesContent":["import request from '@/utils/request'\n\nexport function permissionMenuNodes() {\n  return request({\n    url: '/permission/permissionMenuNodes',\n    method: 'get'\n  })\n}\n\nexport function permissionSrcNodes() {\n  return request({\n    url: '/permission/permissionSrcNodes',\n    method: 'get'\n  })\n}\n\nexport function permissionRoleAdd(ruleForm) {\n  return request({\n    url: 'permission/permissionRoleAdd',\n    method: 'post',\n    data: ruleForm\n  })\n}\n\nexport function permissionRoleLst(params) {\n  return request({\n    url: '/permission/permissionRoleLst',\n    method: 'get',\n    params: params\n  })\n}\n\nexport function permissionRoleDelete(params) {\n  return request({\n    url: '/permission/permissionRoleDelete',\n    method: 'get',\n    params: params\n  })\n}\n\nexport function permissionRoleDetail(params) {\n  return request({\n    url: '/permission/permissionRoleDetail',\n    method: 'get',\n    params: params\n  })\n}\n\nexport function permissionRoleEdit(ruleForm) {\n  return request({\n    url: 'permission/permissionRoleEdit',\n    method: 'post',\n    data: ruleForm\n  })\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"app-container permission_role_add\"},[_c('el-row',{attrs:{\"type\":\"flex\",\"justify\":\"center\"}},[_c('el-col',{attrs:{\"xs\":24,\"md\":12}},[_c('el-form',{ref:\"ruleForm\",attrs:{\"rules\":_vm.rules,\"model\":_vm.ruleForm,\"label-position\":\"right\",\"label-width\":\"150px\"}},[_c('el-form-item',{attrs:{\"label\":\"角色名称\",\"prop\":\"role_name\"}},[_c('el-input',{attrs:{\"placeholder\":\"角色名称\"},model:{value:(_vm.ruleForm.role_name),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"role_name\", $$v)},expression:\"ruleForm.role_name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"菜单分配\",\"prop\":\"permissionMenuIds\"}},[_c('el-tree',{ref:\"tree\",attrs:{\"props\":_vm.defaultProps,\"data\":_vm.permissionMenuNodes,\"node-key\":\"id\",\"show-checkbox\":\"\"}})],1),_c('el-form-item',{attrs:{\"label\":\"权限分配\",\"prop\":\"permissionSrcIds\"}},[_c('el-tree',{ref:\"treeSrc\",attrs:{\"props\":_vm.defaultProps,\"data\":_vm.permissionSrcNodes,\"node-key\":\"id\",\"show-checkbox\":\"\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitForm('ruleForm')}}},[_vm._v(\"确定\")]),_c('el-button',{on:{\"click\":function($event){return _vm.resetForm('ruleForm')}}},[_vm._v(\"重置\")])],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"app-container permission_role_add\">\n    <el-row type=\"flex\" justify=\"center\">\n      <el-col :xs=\"24\" :md=\"12\">\n        <el-form\n          ref=\"ruleForm\"\n          :rules=\"rules\"\n          :model=\"ruleForm\"\n          label-position=\"right\"\n          label-width=\"150px\"\n        >\n          <el-form-item label=\"角色名称\" prop=\"role_name\">\n            <el-input v-model=\"ruleForm.role_name\" placeholder=\"角色名称\" />\n          </el-form-item>\n          <el-form-item label=\"菜单分配\" prop=\"permissionMenuIds\">\n            <el-tree\n              ref=\"tree\"\n              :props=\"defaultProps\"\n              :data=\"permissionMenuNodes\"\n              node-key=\"id\"\n              show-checkbox\n            />\n          </el-form-item>\n          <el-form-item label=\"权限分配\" prop=\"permissionSrcIds\">\n            <el-tree\n              ref=\"treeSrc\"\n              :props=\"defaultProps\"\n              :data=\"permissionSrcNodes\"\n              node-key=\"id\"\n              show-checkbox\n            />\n          </el-form-item>\n          <el-form-item>\n            <el-button type=\"primary\" @click=\"submitForm('ruleForm')\"\n              >确定</el-button\n            >\n            <el-button @click=\"resetForm('ruleForm')\">重置</el-button>\n          </el-form-item>\n        </el-form>\n      </el-col>\n    </el-row>\n  </div>\n</template>\n<script>\nimport {\n  permissionRoleAdd,\n  permissionMenuNodes,\n  permissionSrcNodes\n} from '@/api/permission/permission_role'\nexport default {\n  name: 'PermissionRoleAdd',\n  data() {\n    return {\n      ruleForm: {\n        role_name: '',\n        permissionMenuIds: [],\n        permissionSrcIds: []\n      },\n      defaultProps: {\n        children: 'children',\n        label: 'label'\n      },\n      permissionMenuNodes: [],\n      permissionSrcNodes: [],\n      rules: {\n        role_name: [\n          { required: true, message: '请输入角色名称', trigger: 'blur' },\n          { min: 2, max: 6, message: '长度在 2 到 6 个字符', trigger: 'blur' }\n        ]\n      }\n    }\n  },\n  mounted() {\n    this.getPermissionMenuNodes()\n    this.getPermissionSrcNodes()\n  },\n  methods: {\n    getPermissionMenuNodes() {\n      permissionMenuNodes()\n        .then(res => {\n          this.permissionMenuNodes = res.data\n        })\n        .catch(() => {})\n    },\n    getPermissionSrcNodes() {\n      permissionSrcNodes()\n        .then(res => {\n          this.permissionSrcNodes = res.data\n        })\n        .catch(() => {})\n    },\n    submitForm(formName) {\n      const _this = this\n      this.$refs[formName].validate(valid => {\n        if (valid) {\n          this.ruleForm.permissionMenuIds = [].concat(\n            this.$refs.tree.getCheckedKeys(),\n            this.$refs.tree.getHalfCheckedKeys()\n          )\n          this.ruleForm.permissionSrcIds = [].concat(\n            this.$refs.treeSrc.getCheckedKeys(),\n            this.$refs.treeSrc.getHalfCheckedKeys()\n          )\n          this.ruleForm.tempMenuIds = this.$refs.tree.getCheckedKeys()\n          this.ruleForm.tempSrcIds = this.$refs.treeSrc.getCheckedKeys()\n          permissionRoleAdd(this.ruleForm)\n            .then(res => {\n              this.$message({\n                message: '添加成功',\n                type: 'success',\n                onClose: function() {\n                  _this.$router.push(\n                    '/permission/permission_role/permission_role_lst'\n                  )\n                }\n              })\n            })\n            .catch(() => {})\n        } else {\n          // console.log('error submit!!')\n          return false\n        }\n      })\n    },\n    resetForm(formName) {\n      this.$refs[formName].resetFields()\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./permission_role_add.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./permission_role_add.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./permission_role_add.vue?vue&type=template&id=6f0ae0e6&\"\nimport script from \"./permission_role_add.vue?vue&type=script&lang=js&\"\nexport * from \"./permission_role_add.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/_vue-loader@15.9.1@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}