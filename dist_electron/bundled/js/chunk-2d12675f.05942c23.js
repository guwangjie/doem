(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d12675f"],{"17d6":function(e,r,t){"use strict";t.d(r,"a",(function(){return n}));t("3a20"),t("c9db");function s(e,r,t,s,n,i,o){try{var u=e[i](o),c=u.value}catch(a){return void t(a)}u.done?r(c):Promise.resolve(c).then(s,n)}function n(e){return function(){var r=this,t=arguments;return new Promise((function(n,i){var o=e.apply(r,t);function u(e){s(o,n,i,u,c,"next",e)}function c(e){s(o,n,i,u,c,"throw",e)}u(void 0)}))}}},"3a20":function(e,r,t){var s=t("efd1"),n=t("3d8a"),i=t("3f8e");s||n(Object.prototype,"toString",i,{unsafe:!0})},"3f8e":function(e,r,t){"use strict";var s=t("efd1"),n=t("9552");e.exports=s?{}.toString:function(){return"[object "+n(this)+"]"}},"43eb":function(e,r,t){"use strict";t.d(r,"a",(function(){return n})),t.d(r,"g",(function(){return i})),t.d(r,"b",(function(){return o})),t.d(r,"f",(function(){return u})),t.d(r,"c",(function(){return c})),t.d(r,"d",(function(){return a})),t.d(r,"e",(function(){return d}));var s=t("b775");function n(){return Object(s["a"])({url:"/permission/permissionMenuNodes",method:"get"})}function i(){return Object(s["a"])({url:"/permission/permissionSrcNodes",method:"get"})}function o(e){return Object(s["a"])({url:"permission/permissionRoleAdd",method:"post",data:e})}function u(e){return Object(s["a"])({url:"/permission/permissionRoleLst",method:"get",params:e})}function c(e){return Object(s["a"])({url:"/permission/permissionRoleDelete",method:"get",params:e})}function a(e){return Object(s["a"])({url:"/permission/permissionRoleDetail",method:"get",params:e})}function d(e){return Object(s["a"])({url:"permission/permissionRoleEdit",method:"post",data:e})}},ea74:function(e,r,t){"use strict";t.r(r);var s=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"app-container permission_role_edit"},[t("el-row",{attrs:{type:"flex",justify:"center"}},[t("el-col",{attrs:{xs:24,md:12}},[t("el-form",{ref:"ruleForm",attrs:{rules:e.rules,model:e.ruleForm,"label-position":"right","label-width":"150px"}},[t("el-form-item",{attrs:{label:"角色名称",prop:"role_name"}},[t("el-input",{attrs:{placeholder:"角色名称"},model:{value:e.ruleForm.role_name,callback:function(r){e.$set(e.ruleForm,"role_name",r)},expression:"ruleForm.role_name"}})],1),t("el-form-item",{attrs:{label:"菜单分配",prop:"permissionMenuIds"}},[t("el-tree",{ref:"tree",attrs:{props:e.defaultProps,data:e.permissionMenuNodes,"default-expanded-keys":e.expandedKeys,"node-key":"id","show-checkbox":""}})],1),t("el-form-item",{attrs:{label:"权限分配",prop:"permissionSrcIds"}},[t("el-tree",{ref:"treeSrc",attrs:{props:e.defaultProps,data:e.permissionSrcNodes,"default-expanded-keys":e.expandedSrcKeys,"node-key":"id","show-checkbox":""}})],1),t("el-form-item",[t("el-button",{attrs:{type:"success"},on:{click:function(r){return e.submitForm("ruleForm")}}},[e._v("保存")]),t("el-button",{on:{click:function(r){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1)],1)],1)},n=[],i=t("17d6"),o=t("43eb"),u={name:"PermissionRoleEdit",data(){return{ruleForm:{role_name:"",permissionMenuIds:[],permissionSrcIds:[],id:this.$route.query.id},defaultProps:{children:"children",label:"label"},permissionMenuNodes:[],permissionSrcNodes:[],expandedKeys:[],expandedSrcKeys:[],rules:{role_name:[{required:!0,message:"请输入角色名称",trigger:"blur"},{min:2,max:6,message:"长度在 2 到 6 个字符",trigger:"blur"}]}}},mounted(){var e=this;return Object(i["a"])((function*(){try{yield e.getPermissionMenuNodes(),yield e.getPermissionSrcNodes(),yield e.getPermissionRoleDetail()}catch(r){}}))()},methods:{getPermissionMenuNodes(){return Object(o["a"])().then(e=>{this.permissionMenuNodes=e.data}).catch(()=>{})},getPermissionSrcNodes(){return Object(o["g"])().then(e=>{this.permissionSrcNodes=e.data}).catch(()=>{})},getPermissionRoleDetail(){return Object(o["d"])({id:this.ruleForm.id}).then(e=>{this.ruleForm=e.data,this.$refs.tree.setCheckedKeys(this.ruleForm.tempMenuIds),this.$refs.treeSrc.setCheckedKeys(this.ruleForm.tempSrcIds),this.expandedKeys=this.ruleForm.tempMenuIds,this.expandedSrcKeys=this.ruleForm.tempSrcIds}).catch(()=>{})},submitForm(e){var r=this;this.$refs[e].validate(e=>{if(!e)return!1;this.ruleForm.permissionMenuIds=[].concat(this.$refs.tree.getCheckedKeys(),this.$refs.tree.getHalfCheckedKeys()),this.ruleForm.permissionSrcIds=[].concat(this.$refs.treeSrc.getCheckedKeys(),this.$refs.treeSrc.getHalfCheckedKeys()),this.ruleForm.tempMenuIds=this.$refs.tree.getCheckedKeys(),this.ruleForm.tempSrcIds=this.$refs.treeSrc.getCheckedKeys(),Object(o["e"])(this.ruleForm).then(e=>{this.$message({message:"保存成功",type:"success",onClose:function(){r.$router.push("/permission/permission_role/permission_role_lst")}})}).catch(()=>{})})},resetForm(e){this.$refs[e].resetFields()}}},c=u,a=t("e90a"),d=Object(a["a"])(c,s,n,!1,null,null,null);r["default"]=d.exports}}]);
//# sourceMappingURL=chunk-2d12675f.05942c23.js.map